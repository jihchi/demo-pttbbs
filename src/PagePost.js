// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Api from "./common/Api.js";
import * as Post from "./components/Post.js";
import * as React from "react";
import * as $$Promise from "@ryyppy/rescript-promise/src/Promise.js";
import * as Js_option from "bs-platform/lib/es6/js_option.js";
import * as Belt_Result from "bs-platform/lib/es6/belt_Result.js";

function $$default(props) {
  return React.createElement(Post.make, {
              data: props.post,
              comments: props.comments
            });
}

function getServerSideProps(ctx) {
  var params = ctx.params;
  return $$Promise.$$catch(Promise.all([
                        Api.getPost(params.board, params.slug),
                        Api.getComment(params.board, params.slug)
                      ]).then(function (res) {
                      return Promise.all([
                                  res[0].json(),
                                  res[1].json()
                                ]);
                    }).then(function (json) {
                    return Promise.resolve({
                                TAG: 0,
                                _0: [
                                  ((json) => json)(json[0]),
                                  ((json) => json["list"])(json[1])
                                ],
                                [Symbol.for("name")]: "Ok"
                              });
                  }), (function (e) {
                  return {
                          TAG: 1,
                          _0: e.RE_EXN_ID === $$Promise.JsError ? Js_option.getWithDefault("", e._1.message) : "Unexpected error occurred",
                          [Symbol.for("name")]: "Error"
                        };
                })).then(function (result) {
              var result$1 = Belt_Result.getWithDefault(result, [
                    {
                      bid: "",
                      aid: "",
                      owner: "",
                      title: "",
                      class: "",
                      brdname: ""
                    },
                    []
                  ]);
              return Promise.resolve({
                          props: {
                            post: result$1[0],
                            comments: result$1[1]
                          }
                        });
            });
}

export {
  $$default ,
  $$default as default,
  getServerSideProps ,
  
}
/* Post Not a pure module */
